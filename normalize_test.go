package main

import (
	"testing"

	"github.com/stretchr/testify/assert"
)

func TestNormalize(t *testing.T) {
	ds := Dataset{
		{664159, 550946},
		{665845, 557965},
		{597173, 575538},
		{618600, 551446},
		{635690, 608046},
		{588100, 557588},
		{582015, 546191},
		{604678, 574577},
		{572029, 518313},
		{604737, 574591},
	}
	expected := Dataset{
		{1.6412253270822621, -0.4707405197162186},
		{1.6956355075405858, -0.1582668616376922},
		{-0.5205305140691437, 0.62405249915643},
		{0.1709563997389829, -0.4484813903474676},
		{0.7224807081807099, 2.0712520541951442},
		{-0.8133321554086282, -0.1750502451817305},
		{-1.0097057900995532, -0.6824248400130405},
		{-0.2783309859910185, 0.5812704525096906},
		{-1.3319715445816531, -1.9235048570971207},
		{-0.2764269523925362, 0.5818937081320157},
	}

	nds, err := Normalize(ds)
	assert.NoError(t, err)
	for i, r := range nds {
		assert.InEpsilonSlice(t, expected[i], r, 1e-15)
	}
}
